app: ts-eks
provider: aws
path: .
out_dir: compiled
defaults:
    execution_unit:
        type: eks
execution_units:
    users-api:
        pulumi_params:
            nodeType: node
            replicas: 1
            nodeConstraints:
                instanceType: c4.large
                diskSize: 20
            limits: 
                cpu: 1
                memory: 256
            autoscalingConfig:
                cpuUtilization: 100
                memoryUtilization: 100
                maxReplicas: 4
    users-store:
        pulumi_params:
            nodeType: node
            nodeConstraints:
                instanceType: t3.large
                diskSize: 200
    user-info:
        pulumi_params:
            nodeType: node
            nodeConstraints:
                diskSize: 100
exposed:
    app:
        type: apigateway
persisted:
    users:
        type: dynamodb
